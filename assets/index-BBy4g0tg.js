import{r as l,A as B,u as T,v as _,w as k,j as o,S as j,H as w,t as p,x as W,C as i,f as S,T as D,D as L,i as v,k as A}from"./index-FCNiT-C2.js";import{W as E}from"./WithdrawModal-eOBA_E11.js";import{T as F,a as H,b as I,c as u,d as s,e as M,f as a,g as P}from"./chunk-MGVPL3OH-Dgy3rMqw.js";function R(){const g=l.useContext(B),C=T(),[n,d]=l.useState(),[e,f]=l.useState(),[y,x]=_(),c=async r=>{var b;x.on();try{const t=await v.get("/dashboard/withdrawals",{page:r||1,limit:25},(b=g.props.auth)==null?void 0:b.token);if(t.errors){A(t.errors,C);return}d(r?[...n||[],...t.withdrawals.data]:t.withdrawals.data),f(t.withdrawals.meta)}catch(t){console.error(t)}finally{x.off()}};l.useEffect(()=>{c()},[]);const h={ok:{text:"успешно",color:"green.500"},waiting:{text:"в обработке",color:"yellow.500"},error:{text:"ошибка",color:"red.500"}},m=k();return o.jsxs(j,{direction:"column",spacing:4,children:[o.jsxs(j,{direction:["column","row"],alignItems:["start","center"],justifyContent:"space-between",spacing:0,children:[o.jsx(w,{children:"выплаты"}),o.jsx(p,{leftIcon:o.jsx(W,{}),onClick:m.onOpen,children:"создать выплату"})]}),n?o.jsx(o.Fragment,{children:n.length===0?o.jsx(i,{children:o.jsx(D,{opacity:"0.5",children:"выплаты не найдены"})}):o.jsx(F,{children:o.jsxs(H,{variant:"simple",children:[o.jsx(I,{children:o.jsxs(u,{children:[o.jsx(s,{borderBottomColor:"rgba(255, 255, 255, 0.3)",color:"white",opacity:"0.5",children:"#"}),o.jsx(s,{borderBottomColor:"rgba(255, 255, 255, 0.3)",color:"white",opacity:"0.5",children:"получатель"}),o.jsx(s,{borderBottomColor:"rgba(255, 255, 255, 0.3)",color:"white",opacity:"0.5",children:"сумма"}),o.jsx(s,{borderBottomColor:"rgba(255, 255, 255, 0.3)"}),o.jsx(s,{borderBottomColor:"rgba(255, 255, 255, 0.3)",color:"white",opacity:"0.5",children:"метод"}),o.jsx(s,{borderBottomColor:"rgba(255, 255, 255, 0.3)",color:"white",opacity:"0.5",children:"дата и время"}),o.jsx(s,{borderBottomColor:"rgba(255, 255, 255, 0.3)",color:"white",opacity:"0.5",children:"статус"})]})}),o.jsx(M,{children:n.map(r=>o.jsxs(u,{children:[o.jsxs(a,{borderBottomColor:"rgba(255, 255, 255, 0.3)",children:["#",r.id]}),o.jsx(a,{borderBottomColor:"rgba(255, 255, 255, 0.3)",children:r.payment_method.value}),o.jsxs(a,{borderBottomColor:"rgba(255, 255, 255, 0.3)",children:[r.amount/100," ",r.currency]}),o.jsx(a,{opacity:"0.5",borderBottomColor:"rgba(255, 255, 255, 0.3)",children:r.commission_amount!==0?`-${(r.commission_amount/100).toFixed(2)} ${r.currency}`:""}),o.jsx(a,{maxW:"300px",css:{textWrap:"balance"},borderBottomColor:"rgba(255, 255, 255, 0.3)",children:r.payment_method.name}),o.jsx(a,{borderBottomColor:"rgba(255, 255, 255, 0.3)",children:L(r.created_at).format("LLL")}),o.jsx(a,{borderBottomColor:"rgba(255, 255, 255, 0.3)",color:h[r.status].color,children:h[r.status].text})]}))}),(e==null?void 0:e.current_page)!==(e==null?void 0:e.last_page)&&o.jsx(P,{mt:0,children:o.jsx(i,{children:o.jsx(p,{isDisabled:y,onClick:()=>c((e==null?void 0:e.current_page)+1),children:"показать еще"})})})]})})}):o.jsx(i,{children:o.jsx(S,{color:"brand.300",size:"xl"})}),o.jsx(E,{refresh:c,...m})]})}export{R as default};
